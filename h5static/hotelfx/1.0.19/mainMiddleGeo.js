webpackJsonp([12],{0:function(t,e,n){var o=n(77),i=new o,r={channel:window.$DATA.channel,indate:window.$DATA.indate,outdate:window.$DATA.outdate,subPath:window.$DATA.subPath,init:function(){var t="",e=JSON.parse(window.$DATA.silentLogin)||"";if(t=/^zdwshwh5$/.test(this.channel)?"winksi":"",e){var n=e.loginStatus;n?this.precision(t):(alert("登录系统出了点小问题，正在处理中，请您尝试重新登录，多请谅解~"),window.location.replace(e.refreshUrl))}},precision:function(t){var e=this;i.precision(t).then(function(t){e._success(t)},function(t){e.openNearbyUrl("0101")})},openNearbyUrl:function(t,e,n){var o="//"+location.host+"/"+this.subPath+t+"/nlist/";e&&n&&(o+="#indate="+this.indate+"&outdate="+this.outdate+"&isnear=1&startlat="+e+"&startlng="+n+"&lbstype=2"),window.location.replace(o)},_success:function(t){var e=t.cityData||t.data,n=t.lat,o=t.lng;this.openNearbyUrl(e.cityId,n,o)}};r.init()},56:function(t,e){var n,o=function(){window.qq=window.qq||{},qq.maps=qq.maps||{},window.soso||(window.soso=qq),soso.maps||(soso.maps=qq.maps),qq.maps.Geolocation=function(){"use strict";var t=null,e=null,n=null,o=null,i=null,r="_geoIframe_"+Math.ceil(1e7*Math.random()),a=document.createElement("iframe"),s=null,c=null,u=null,l=null,f=function(f,g){if(!f)return void alert("璇疯緭鍏ey锛�");if(!g)return void alert("璇疯緭鍏eferer锛�");var d=document.getElementById(r);d||(a.setAttribute("id",r),a.setAttribute("src","https://apis.map.qq.com/tools/geolocation?key="+f+"&referer="+g),a.setAttribute("style","display: none; width: 100%; height: 30%"),document.body?document.body.appendChild(a):document.write(a.outerHTML),window.addEventListener("message",function(r){var a=r.data;if(a&&"geolocation"==a.module)clearTimeout(l),t&&t(a),t=null,e=null,n&&n(a),n=null,o=null,i&&i(a);else{c=(new Date).getTime();var f=c-s;f>=u&&(e&&e(),e=null,t=null,clearTimeout(l)),o&&o(),o=null,n=null}},!1))};return f.prototype.getLocation=function(n,o,i){t=n,e=o,s=(new Date).getTime(),u=i&&i.timeout?+i.timeout:1e4,clearTimeout(l),l=setTimeout(function(){e&&e(),e=null},u),document.getElementById(r).contentWindow.postMessage("getLocation","*")},f.prototype.getIpLocation=function(t,e){n=t,o=e,document.getElementById(r).contentWindow.postMessage("getLocation.robust","*")},f.prototype.watchPosition=function(t){i=t,document.getElementById(r).contentWindow.postMessage("watchPosition","*")},f.prototype.clearWatch=function(){i=null,document.getElementById(r).contentWindow.postMessage("clearWatch","*")},f}()};o(),t.exports={location:function(t){var e=this.txMapKey;return n&&!t||"string"==typeof e&&e.length&&(n||o(),n=new qq.maps.Geolocation(e,"ewhtml5")),n},setMapKey:function(t){this.txMapKey=t}}},77:function(t,e,n){function o(){r=this,this.sourceType=1,this.targetType=1,this.getCityDataRetry=0,this.getLocationRetry=0,this.enableHighAcuracy=!0,this.defer=null}var i=n(56);n(78),n(79);var r,a=navigator,s=a.userAgent.toLowerCase(),c="手机未能成功定位，可能您曾拒绝过m.elong.com使用您的地理位置信息。";c+=s.match(/(iphone)|(ipad)|(ipod)/i)?"请在“系统设置”中开启“位置服务”后刷新页面并重试":"请在系统“设置>隐私”中开启浏览器“定位服务”或“设置>通用”中“还原位置与隐私”并重试";var u=function(){var t=navigator.userAgent.toLowerCase(),e=!1;if(t.indexOf("like mac os x")>0){var n=/os [\d._]*/gi,e=t.match(n);e=(e+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}return parseFloat(e)}();o.prototype={constructor:o,precision:function(t){switch(this.defer=$.Deferred(),this.getLocationRetry=0,this.getCityDataRetry=0,this.enableHighAcuracy=!0,t){case"winksi":this._getWinksiLocation();break;case"wx":this._getWxLocation();break;case"mqq":this._getMqqLocation();break;default:this._nvGeolocation()}return this.defer},_nvGeolocation:function(){u>=10?this._qqlbs():a.geolocation?(this.sourceType=1,this._getCurrentPosition(),clearTimeout(this.geoTimer),this.geoTimer=setTimeout(function(){r._getCurrentPosition()},1e4)):this.defer.reject(this._getErrorMsg(1))},_getMqqLocation:function(){var t=setTimeout(function(){r.sourceType=1,r._nvGeolocation()},5e3);try{window.mqq&&window.mqq.sensor?window.mqq.sensor.getLocation(function(e,n,o){clearTimeout(t),0===e?(r.sourceType=5,r._getCityData(n,o)):(r.sourceType=1,r._nvGeolocation())}):(r.sourceType=1,r._nvGeolocation())}catch(e){r.sourceType=1,r._nvGeolocation()}},_getWxLocation:function(t){var e=t!==!1,n=null;return window.wx?(e&&(n=setTimeout(function(){r._nvGeolocation()},3e3)),this.getLocationRetry=1,void wx.run("getLocation",{type:"gcj02",timeout:1e3,success:function(t){clearTimeout(n);var e=t.latitude,o=t.longitude;r.sourceType=5,r._getCityData(e,o)},fail:function(t){clearTimeout(n),e?r._nvGeolocation():r.defer.reject(r._getErrorMsg(3))},cancel:function(t){clearTimeout(n),e?r._nvGeolocation():r.defer.reject(r._getErrorMsg(3))}})):void(e&&this._nvGeolocation())},_getWinksiLocation:function(){if(!window.winksi)return void r.defer.reject(this._getErrorMsg(1));var t,e,n=window.winksi.getLocationInfo();n?(n=JSON.parse(n),t=n.lat,e=n.lng,this.sourceType=3,this._getCityData(t,e)):r.defer.reject(this._getErrorMsg(1))},_qqlbs:function(){r.sourceType=5,i.setMapKey("4BCBZ-OGQWX-3PE4P-ZNP3C-EU77E-QGF3Z"),i.location().getLocation(function(t){var e=t.lat,n=t.lng;r._getCityData(e,n)},function(){r.defer.reject(this._getErrorMsg(1))},{timeout:1e4,failTipFlag:!0})},_getCityData:function(t,e){if(!t||!e)return void r.defer.reject(this._getErrorMsg(2));var n="hotelfx/";window.pageInfo&&window.pageInfo.subPath?n=window.pageInfo.subPath:window.$DATA&&window.$DATA.subPath&&(n=window.$DATA.subPath),$.ajax({timeout:3e3,type:"GET",url:"//"+location.hostname+"/"+n+"api/gethotelgeocity",data:{lat:t,lng:e,sourceType:this.sourceType,targetType:this.targetType},success:function(n){r.defer.resolve({cityData:n,lat:t,lng:e,sourceType:r.sourceType,targetType:r.targetType})},error:function(){0===r.getCityDataRetry?(r.getCityDataRetry=1,r._getCityData(t,e)):r.defer.reject(r._getErrorMsg(3))}})},_getCurrentPosition:function(){a.geolocation.getCurrentPosition(this._success,this._error,{enableHighAcuracy:this.enableHighAcuracy,timeout:5e3})},_success:function(t){clearTimeout(r.geoTimer);var e=t.coords.latitude,n=t.coords.longitude;r._getCityData(e,n)},_error:function(t){switch(clearTimeout(r.geoTimer),t.code){case t.TIMEOUT:0===r.getLocationRetry?(r.getLocationRetry=1,r.enableHighAcuracy=!1,r._getCurrentPosition()):r.defer.reject(r._getErrorMsg(4));break;case t.PERMISSION_DENIED:r.defer.reject(r._getErrorMsg(6));break;case t.POSITION_UNAVAILABLE:r.defer.reject(r._getErrorMsg(5))}},_getErrorMsg:function(t){var e=[,{code:1,msg:"无法获取位置信息"},{code:2,msg:"获取经纬度失败，请重试"},{code:3,msg:"城市定位失败"},{code:4,msg:"定位超时，请重试"},{code:5,msg:"亲爱的火星网友，非常抱歉<br />我们暂时无法为您所在的星球提供位置服务"},{code:6,msg:c}];return e[t]?e[t]:e[1]}},t.exports=o},78:function(t,e){!function(t){t.Callbacks=function(e){e=t.extend({},e);var n,o,i,r,a,s,c=[],u=!e.once&&[],l=function(t){for(n=e.memory&&t,o=!0,s=r||0,r=0,a=c.length,i=!0;c&&s<a;++s)if(c[s].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,c&&(u?u.length&&l(u.shift()):n?c.length=0:f.disable())},f={add:function(){if(c){var o=c.length,s=function(n){t.each(n,function(t,n){"function"==typeof n?e.unique&&f.has(n)||c.push(n):n&&n.length&&"string"!=typeof n&&s(n)})};s(arguments),i?a=c.length:n&&(r=o,l(n))}return this},remove:function(){return c&&t.each(arguments,function(e,n){for(var o;(o=t.inArray(n,c,o))>-1;)c.splice(o,1),i&&(o<=a&&--a,o<=s&&--s)}),this},has:function(e){return!(!c||!(e?t.inArray(e,c)>-1:c.length))},empty:function(){return a=c.length=0,this},disable:function(){return c=u=n=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,n||f.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||o&&!u||(e=e||[],e=[t,e.slice?e.slice():e],i?u.push(e):l(e)),this},fire:function(){return f.fireWith(this,arguments)},fired:function(){return!!o}};return f}}(Zepto)},79:function(t,e){!function(t){function e(n){var o=[["resolve","done",t.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",t.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",t.Callbacks({memory:1})]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var n=arguments;return e(function(e){t.each(o,function(o,i){var s=t.isFunction(n[o])&&n[o];a[i[1]](function(){var n=s&&s.apply(this,arguments);if(n&&t.isFunction(n.promise))n.promise().done(e.resolve).fail(e.reject).progress(e.notify);else{var o=this===r?e.promise():this,a=s?[n]:arguments;e[i[0]+"With"](o,a)}})}),n=null}).promise()},promise:function(e){return null!=e?t.extend(e,r):r}},a={};return t.each(o,function(t,e){var n=e[2],s=e[3];r[e[1]]=n.add,s&&n.add(function(){i=s},o[1^t][2].disable,o[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?r:this,arguments),this},a[e[0]+"With"]=n.fireWith}),r.promise(a),n&&n.call(a,a),a}var n=Array.prototype.slice;t.when=function(o){var i,r,a,s=n.call(arguments),c=s.length,u=0,l=1!==c||o&&t.isFunction(o.promise)?c:0,f=1===l?o:e(),g=function(t,e,o){return function(r){e[t]=this,o[t]=arguments.length>1?n.call(arguments):r,o===i?f.notifyWith(e,o):--l||f.resolveWith(e,o)}};if(c>1)for(i=new Array(c),r=new Array(c),a=new Array(c);u<c;++u)s[u]&&t.isFunction(s[u].promise)?s[u].promise().done(g(u,a,s)).fail(f.reject).progress(g(u,r,i)):--l;return l||f.resolveWith(a,s),f.promise()},t.Deferred=e}(Zepto)}});